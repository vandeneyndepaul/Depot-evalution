DROP DATABASE Papyrus;

CREATE DATABASE Papyrus;

USE Papyrus;


CREATE TABLE Produit(
   CODART CHAR(50),
   LIBART VARCHAR(50),
   STKALE INT,
   STKPHY INT,
   QTEANN INT,
   UNIMES CHAR(50),
   PRIMARY KEY(CODART)
);

CREATE TABLE FOURNIS(
   NUMFOU VARCHAR(50),
   NOMFOU VARCHAR(50),
   RUEFOU VARCHAR(50),
   POSFOU CHAR(50),
   VILFOU VARCHAR(50),
   CONFOU VARCHAR(50),
   SATISF TINYINT(3),
   PRIMARY KEY(NUMFOU)
);

CREATE TABLE ENTCOM(
   NUMCOM INT,
   OBSCOM VARCHAR(50),
   DATCOM DATE,
   NUMFOU VARCHAR(50) NOT NULL,
   PRIMARY KEY(NUMCOM),
   FOREIGN KEY(NUMFOU) REFERENCES FOURNIS(NUMFOU),
);
CREATE Index ON ENTCOM(NUMFOU);

CREATE TABLE LIGCOM(
   NUMLIG TINYINT,
   QTECDE INT,
   PRIUNI VARCHAR(50),
   QTELIV INT,
   DERLIV DATETIME,
   NUMCOM INT NOT NULL,
   CODART CHAR(50) NOT NULL,
   PRIMARY KEY(NUMLIG),
   FOREIGN KEY(NUMCOM) REFERENCES ENTCOM(NUMCOM),
   FOREIGN KEY(CODART) REFERENCES Produit(CODART)
);

CREATE TABLE VENTE(
   CODART CHAR(50),
   NUMFOU VARCHAR(50),
   DELLIV SMALLINT,
   QTE1 INT,
   PRIX1 VARCHAR(50),
   QTE2 INT,
   PRIX2 VARCHAR(50),
   QTE3 INT,
   PRIX3 VARCHAR(50),
   PRIMARY KEY(CODART, NUMFOU),
   FOREIGN KEY(CODART) REFERENCES Produit(CODART),
   FOREIGN KEY(NUMFOU) REFERENCES FOURNIS(NUMFOU)
);

